{
  "name": "AI Meeting Minutes - CMHK ON PREMISE",
  "nodes": [
    {
      "parameters": {
        "content": "## Step 1: Batch Transcribing Videos On Fanolab\n1. Look up the T-flow pending to transcribe video\n2. Batch transcribe\n3. Wait until the results return",
        "height": 440,
        "width": 2920
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        0,
        0
      ],
      "typeVersion": 1,
      "id": "aeecd137-b253-4f64-9cc6-da1bd0fa4767",
      "name": "Sticky Note3"
    },
    {
      "parameters": {
        "jsCode": "const items = $input.first().json.data.rows;\n\nconst result_list = items.map((item) => {\n  return {\n    rowid: item.rowid,\n    video_name: item.video_name,\n    url: item.url,\n    sys_id: item.sys_id\n  };\n});\n\nreturn result_list;\n"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        288,
        224
      ],
      "id": "bec22fcb-867e-4de7-95a2-8a709d309443",
      "name": "Return Url List"
    },
    {
      "parameters": {
        "options": {}
      },
      "type": "n8n-nodes-base.splitInBatches",
      "typeVersion": 3,
      "position": [
        640,
        224
      ],
      "id": "7bdd956c-ea0d-49b9-b62e-cc297864d587",
      "name": "Loop Over Items2"
    },
    {
      "parameters": {
        "jsCode": "const items = $input.first().json.data.rows;\n\nconst result_list = items.map((item) => {\n  return {\n    rowid: item.rowid,\n    video_name: item.video_name,\n    url: item.url,\n    sys_id: item.sys_id,\n    fanolab_id: item.fanolab_id\n  };\n});\n\nreturn result_list;\n"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        1456,
        208
      ],
      "id": "97603a43-1c46-4a41-ac46-dd6134194bac",
      "name": "Return Url List1"
    },
    {
      "parameters": {
        "options": {}
      },
      "type": "n8n-nodes-base.splitInBatches",
      "typeVersion": 3,
      "position": [
        1792,
        208
      ],
      "id": "73654c77-ce83-4b6d-a8a6-3d429e6e41c1",
      "name": "Loop Over Items3"
    },
    {
      "parameters": {
        "unit": "minutes"
      },
      "type": "n8n-nodes-base.wait",
      "typeVersion": 1.1,
      "position": [
        2736,
        320
      ],
      "id": "3551968f-2fd7-403b-8bc4-50478903e197",
      "name": "Wait 10mins",
      "webhookId": "dae4800e-9d66-459b-bb1e-d78437b5892d"
    },
    {
      "parameters": {
        "content": "## Step 2: Update the Transcription to T-flow\n1. Look up transcription \n2. Update to T-flow",
        "height": 440,
        "width": 2880,
        "color": 4
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        16,
        560
      ],
      "typeVersion": 1,
      "id": "40f2ccd9-4a78-47fa-a2b6-1a7f9cdc2ac5",
      "name": "Sticky Note4"
    },
    {
      "parameters": {
        "jsCode": "var target_row_id = $('Loop Over Items3').first().json.rowid\nvar transcription = $input.first().json.transcriptions\nvar speaker_stats = $input.first().json.speaker_stats\nvar speaker_list = []\nfor (const speaker in speaker_stats) {\n  if (speaker_stats.hasOwnProperty(speaker)) {\n      speaker_list.push({\n          speaker_id: speaker,\n          ...speaker_stats[speaker]\n      });\n  }\n}\nvar total_duration = $input.first().json.total_duration\n\n\nvar output = {\n  rowid: target_row_id, \n  total_duration: total_duration,\n  speaker_stats: speaker_list,\n  transcriptions: transcription }\n\nreturn output\n"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        96,
        768
      ],
      "id": "a91dd0ee-5d7d-4ae3-ba6d-7bd05df0f649",
      "name": "Map RowId and Transcriptions1"
    },
    {
      "parameters": {},
      "type": "n8n-nodes-base.merge",
      "typeVersion": 3.1,
      "position": [
        1328,
        800
      ],
      "id": "99fe4aff-c685-4f6f-a8e4-1c8392249c2b",
      "name": "Merge2"
    },
    {
      "parameters": {
        "jsCode": "var speaker_stats = $input.first().json.speaker_stats;\nvar resultArray = [];\n\nfor (const speaker of speaker_stats) {\n    var output_obj = [\n        { \"controlId\": \"speaker\", \"value\": speaker.speaker_id },\n        { \"controlId\": \"meeting_minutes\", \"value\": $input.first().json.rowid }, // Assuming static value\n        { \"controlId\": \"wpm\", \"value\": speaker.words_per_minute.toFixed(2) },\n        { \"controlId\": \"talk_time\", \"value\": (speaker.percentage / 100).toFixed(2) },\n        { \"controlId\": \"total_talk_time\", \"value\": (speaker.total_duration / 60).toFixed(2) }\n    ]\n        if (speaker.identified_name !== \"unknown\") {\n            output_obj.push({ \"controlId\": \"name\", \"value\": speaker.identified_name });\n        }\n  \n    resultArray.push(output_obj);\n}\n\nreturn {data: resultArray};\n"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        448,
        864
      ],
      "id": "dbddcd80-2325-4ed2-ad64-75bc1de0e7f7",
      "name": "Set Speaker Map Data2"
    },
    {
      "parameters": {
        "httpMethod": "POST",
        "path": "358e98c1-5b86-4d8c-88e9-f46f6b7996d5",
        "authentication": "headerAuth",
        "options": {}
      },
      "type": "n8n-nodes-base.webhook",
      "typeVersion": 2,
      "position": [
        -192,
        224
      ],
      "id": "f56bc6df-c473-4527-86f4-b8bada04a2ec",
      "name": "Webhook",
      "webhookId": "358e98c1-5b86-4d8c-88e9-f46f6b7996d5",
      "credentials": {
        "httpHeaderAuth": {
          "id": "5smlbamU5XVCovKu",
          "name": "Header Auth account"
        }
      }
    },
    {
      "parameters": {
        "method": "POST",
        "url": "http://10.0.62.130:8880/api/v2/open/worksheet/getFilterRows",
        "sendBody": true,
        "specifyBody": "json",
        "jsonBody": "={\n  \"appKey\": \"{{ $('Webhook').item.json.body.appKey}}\",\n  \"sign\": \"{{ $('Webhook').item.json.body.sign}}\",\n  \"worksheetId\": \"meeting_minutes\",\n  \"pageSize\": 50,\n  \"pageIndex\": 1,\n  \"listType\": 1,\n  \"filters\":[\n        {\n            \"controlId\":\"process_status\",\n            \"spliceType\": 1,\n            \"filterType\":2,\n            \"value\": \"Pending To Process\"\n        }\n    ]\n}",
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        80,
        224
      ],
      "id": "e2a5d069-868b-4a99-ab8b-7f392ca97e77",
      "name": "[T-flow] Get Meeting Minutes List"
    },
    {
      "parameters": {
        "method": "POST",
        "url": "http://ai_meeting_backend:8000/fanolab_submit_transcription",
        "sendBody": true,
        "bodyParameters": {
          "parameters": [
            {
              "name": "source_url",
              "value": "={{ $json.url }}"
            },
            {
              "name": "language_code",
              "value": "yue-x-auto"
            },
            {
              "name": "application_owner",
              "value": "={{ $('Webhook').item.json.body.app_owner }}"
            }
          ]
        },
        "options": {
          "allowUnauthorizedCerts": false
        }
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        1008,
        320
      ],
      "id": "32979e27-fbfe-4b59-a1fc-95d4270e6a0c",
      "name": "[Backend] Submit Fanolab API"
    },
    {
      "parameters": {
        "method": "POST",
        "url": "http://10.0.62.130:8880/api/v2/open/worksheet/editRow",
        "sendBody": true,
        "specifyBody": "json",
        "jsonBody": "={\n  \"appKey\": \"{{ $('Webhook').item.json.body.appKey}}\",\n  \"sign\": \"{{ $('Webhook').item.json.body.sign}}\",\n  \"worksheetId\": \"meeting_minutes\",\n  \"rowId\":\"{{ $('Loop Over Items2').item.json.rowid }}\",\n  \"triggerWorkflow\": false,\n  \"controls\":[\n        {\n            \"controlId\":\"fanolab_id\",\n            \"value\":\"{{ $json.name }}\"\n        },\n        {\n           \"controlId\":\"process_status\",\n            \"value\":\"Transcribing\"\n        }\n    ]\n}",
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        1216,
        320
      ],
      "id": "437a6ca4-240e-4a62-9f76-b4c4958c1a3e",
      "name": "[T-flow] Update T-flow Fanolab ID",
      "notesInFlow": true,
      "notes": "Update the transcript and the status of the row data"
    },
    {
      "parameters": {
        "method": "POST",
        "url": "http://10.0.62.130:8880/api/v2/open/worksheet/getFilterRows",
        "sendBody": true,
        "specifyBody": "json",
        "jsonBody": "={\n  \"appKey\": \"{{ $('Webhook').item.json.body.appKey}}\",\n  \"sign\": \"{{ $('Webhook').item.json.body.sign}}\",\n  \"worksheetId\": \"meeting_minutes\",\n  \"rowIds\":[{{ $('[T-flow] Get Meeting Minutes List').item.json.data.rows.map(row => `\"${row.rowid}\"`).join(', ')}}],\n  \"pageSize\": 50,\n  \"pageIndex\": 1,\n  \"listType\": 1,\n  \"filters\":[\n       {\n            \"controlId\":\"process_status\",\n            \"spliceType\": 1,\n            \"filterType\":2,\n            \"value\": \"Transcribing\"\n        }\n\n\n  ]\n}",
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        1152,
        208
      ],
      "id": "2dbdf130-bcd0-4b36-95de-2a3e6260c658",
      "name": "[T-flow] Get Meeting Minutes List with fanolab id"
    },
    {
      "parameters": {
        "method": "POST",
        "url": "http://ai_meeting_backend:8000/fanolab_transcription",
        "sendBody": true,
        "bodyParameters": {
          "parameters": [
            {
              "name": "sys_id",
              "value": "={{ $('Cache Fanolab Data').item.json.sys_id }}"
            },
            {
              "name": "fanolab_id",
              "value": "={{ $('Cache Fanolab Data').item.json.fanolab_id }}"
            },
            {
              "name": "source_url",
              "value": "={{ $('Cache Fanolab Data').item.json.url }}"
            },
            {
              "name": "application_owner",
              "value": "={{ $('Webhook').item.json.body.app_owner }}"
            },
            {
              "name": "confidence_threshold",
              "value": "={{ $('Webhook').item.json.body.confidence_threshold }}"
            }
          ]
        },
        "options": {
          "allowUnauthorizedCerts": false
        }
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        2208,
        288
      ],
      "id": "b298b257-2272-4027-8ace-ae1fac19f55c",
      "name": "[Backend] Get Fanolab Transcription",
      "retryOnFail": true
    },
    {
      "parameters": {
        "method": "POST",
        "url": "http://10.0.62.130:8880/api/v2/open/worksheet/editRow",
        "sendBody": true,
        "specifyBody": "json",
        "jsonBody": "={\n  \"appKey\": \"{{ $('Webhook').item.json.body.appKey}}\",\n  \"sign\": \"{{ $('Webhook').item.json.body.sign}}\",\n  \"worksheetId\": \"meeting_minutes\",\n  \"rowId\":\"{{ $json.rowid}}\",\n  \"triggerWorkflow\": false,\n  \"controls\":[\n        {\n            \"controlId\":\"process_status\",\n            \"value\":\"Pending To AI\"\n        },\n        {\n            \"controlId\":\"transcript\",\n            \"value\": \"{{ $json.transcriptions.join(\"\\\\n\")}}\"\n        },\n        {\n            \"controlId\":\"duration\",\n            \"value\": \"{{ ($json.total_duration / 60)}}\"\n        }\n    ]\n}",
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        1008,
        704
      ],
      "id": "123c4570-f0c4-4d6f-8fe4-745e884bceec",
      "name": "[T-flow] Update T-flow Fano Data",
      "notesInFlow": true,
      "notes": "Update the transcript and the status of the row data"
    },
    {
      "parameters": {
        "method": "POST",
        "url": "http://10.0.62.130:8880/api/v2/open/worksheet/addRows",
        "sendBody": true,
        "bodyParameters": {
          "parameters": [
            {
              "name": "appKey",
              "value": "={{ $('Webhook').item.json.body.appKey}}"
            },
            {
              "name": "sign",
              "value": "={{ $('Webhook').item.json.body.sign}}"
            },
            {
              "name": "worksheetId",
              "value": "speaker_map"
            },
            {
              "name": "triggerWorkflow",
              "value": "true"
            },
            {
              "name": "rows",
              "value": "={{ $json.data }}"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        768,
        864
      ],
      "id": "59c249c5-b01b-4a29-abf8-82534f6e2493",
      "name": "[T-flow] Update Speaker Map Fano",
      "notesInFlow": false
    },
    {
      "parameters": {
        "rules": {
          "values": [
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "leftValue": "={{ $json.status }}",
                    "rightValue": "success",
                    "operator": {
                      "type": "string",
                      "operation": "equals"
                    },
                    "id": "e992a465-f6df-469b-ab4e-5aacf6ea5524"
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "Success"
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "id": "84e7d4e1-8ce6-49f0-aa91-217263a3cf0a",
                    "leftValue": "={{ $json.status }}",
                    "rightValue": "failed",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "Failed"
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "id": "927472c8-9aaf-4f6f-ac90-011672909663",
                    "leftValue": "={{ $json.status }}",
                    "rightValue": "in_progress",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "In progress"
            }
          ]
        },
        "options": {
          "fallbackOutput": "extra"
        }
      },
      "type": "n8n-nodes-base.switch",
      "typeVersion": 3.2,
      "position": [
        2400,
        288
      ],
      "id": "4c812bd4-16f7-4ec7-8645-96f62c76c9a7",
      "name": "Switch1"
    },
    {
      "parameters": {
        "method": "POST",
        "url": "http://10.0.62.130:8880/api/v2/open/worksheet/editRow",
        "sendBody": true,
        "specifyBody": "json",
        "jsonBody": "={\n  \"appKey\": \"{{ $('Webhook').item.json.body.appKey}}\",\n  \"sign\": \"{{ $('Webhook').item.json.body.sign}}\",\n  \"worksheetId\": \"meeting_minutes\",\n  \"rowId\":\"{{ $('Loop Over Items3').item.json.rowid}}\",\n  \"triggerWorkflow\": false,\n  \"controls\":[\n        {\n            \"controlId\":\"process_status\",\n            \"value\":\"Failed\"\n        },\n        {\n            \"controlId\":\"transcript\",\n            \"value\": \"Failed: {{$json.message}} \"\n        }\n    ]\n}",
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        2736,
        16
      ],
      "id": "184e10f4-5389-4e29-82ee-d2a208111b23",
      "name": "[T-flow] Update T-flow Data Failed1",
      "notesInFlow": true,
      "notes": "Update the transcript and the status of the row data"
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "18bc23c8-a109-4372-987e-79b8dacb0076",
              "name": "sys_id",
              "value": "={{ $json.sys_id }}",
              "type": "string"
            },
            {
              "id": "6e228561-1fa9-4da3-bb17-864bab45b8a1",
              "name": "rowid",
              "value": "={{ $json.rowid }}",
              "type": "string"
            },
            {
              "id": "ad737cee-c578-4d05-a38c-3c56ce8af619",
              "name": "video_name",
              "value": "={{ $json.video_name }}",
              "type": "string"
            },
            {
              "id": "635a0c65-ee5d-4e91-bb39-0be055bd7d66",
              "name": "url",
              "value": "={{ $json.url }}",
              "type": "string"
            },
            {
              "id": "c4ee200d-47df-4bd9-8914-cc6d9530e6d5",
              "name": "fanolab_id",
              "value": "={{ $json.fanolab_id }}",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        2000,
        288
      ],
      "id": "bc4bb3e0-ef04-44da-986a-c43c468a3263",
      "name": "Cache Fanolab Data"
    },
    {
      "parameters": {
        "jsCode": "const items_list = $input.first().json.data.rows;\n\nvar output_list = []\n\nfor (const item of items_list) {\n  var output_obj = {\n    rowid: item.rowid,\n    sys_id: item.sys_id,\n    datetime: item.datetime,\n    project: item.project,\n    description: item.description,\n    transcript: item.transcript\n  }\n  output_list.push(output_obj)\n}\n\n// Sort by datetime (assuming datetime is in a format that can be sorted correctly as a string)\noutput_list.sort((a, b) => new Date(a.datetime) - new Date(b.datetime));\n\n\nreturn output_list;\n"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        720,
        1360
      ],
      "id": "3400d488-cd36-475a-9fb6-a51582f14044",
      "name": "Map the Transcript1"
    },
    {
      "parameters": {
        "jsCode": "const items = $input.all();\nconst updatedItems = items.map((item) => {\n  // const textArray = $input.first().json.text.split(\"\\n\");\n  const textArray = $input.first().json.output.output_text.replace(/^[\\s\\S]*?<\\/think>/,'').split(\"\\n\");\n  return { textArray };\n});\nreturn updatedItems;\n"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        2032,
        1440
      ],
      "id": "82533996-3140-4d24-b847-01b50f89d16b",
      "name": "Set response1"
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "aac290ed-b8f5-4ff7-b1cb-7e12437b6c30",
              "name": "project_rowid",
              "value": "={{ $json.data.rows[0].rowid }}",
              "type": "string"
            },
            {
              "id": "cffa3886-58b2-4a95-b680-faeb331a5a21",
              "name": "rowid",
              "value": "={{ $('Loop Over Items5').item.json.rowid }}",
              "type": "string"
            },
            {
              "id": "6a34171b-69fe-4c63-ac4b-748b22bce907",
              "name": "datetime",
              "value": "={{ $('Loop Over Items5').item.json.datetime }}",
              "type": "string"
            },
            {
              "id": "e3f3a068-1b6b-4bc6-94b8-34850456a50e",
              "name": "description",
              "value": "={{ $('Loop Over Items5').item.json.description }}",
              "type": "string"
            },
            {
              "id": "56c68ce0-ee31-4876-b390-86ce96446d49",
              "name": "transcript",
              "value": "={{ $('Loop Over Items5').item.json.transcript }}",
              "type": "string"
            },
            {
              "id": "3dca3745-ed45-49c3-843d-438824e1b0ec",
              "name": "project_overview",
              "value": "={{ $('[T-flow] Get Project Context1').item.json.data.rows.first().overview}}",
              "type": "string"
            },
            {
              "id": "3007f9bb-c1d0-45f9-949f-90c1198f9b97",
              "name": "glossary",
              "value": "={{ $('[T-flow] Get Project Context1').item.json.data.rows.first().glossary}}",
              "type": "string"
            },
            {
              "id": "859811a6-223d-4516-a75a-583cf84b0610",
              "name": "long_term_memory",
              "value": "={{ $('[T-flow] Get Project Context1').item.json.data.rows.first().memory}}",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        1408,
        1440
      ],
      "id": "807d5b7d-3f0d-4f49-a5ee-b1f4cfd141d4",
      "name": "Set Project Context1"
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "=Objective:\nYou are responsible for maintaining a concise long-term memory of project discussions. When a new meeting transcript is provided, update the memory with key points while ensuring brevity and relevance.\n\nMemory Update Format:\nFor each new update, summarize the transcript using the following structure in pure text, the format is listed within the <format> tag:\n<format>\nDatetime: [Date and time of the meeting]\nDiscussion Points: [Key topics discussed]\nDecisions Made: [Finalized conclusions or agreements]\nAction Items: [Tasks assigned, including responsible parties]\nGuidelines for Updating Memory:\nBe Concise: Summarize only the essential points. Avoid redundancy or excessive details.\nPrioritize Relevance: Focus on updates that impact future discussions or decisions.\nMaintain Clarity: Use clear and structured bullet points for easy reference.\nEnsure Continuity: Retain important context from previous updates while integrating new information logically.\nLanguage: Make sure everything is written in Cantonese\nOutput format: Make sure the output is pure string\n</format>\n\n# Below is the Project Context, background for reference only, not the current meeting minutes:\n<PROJECT BACKGROUND CONTEXT, DON'T SUMMARIZE IT AS MEETING CONTENT>\n\n# Project Overview:\n<project context for reference, DON'T SUMMARIZE IT AS MEETING CONTENT>\n{{ $('Set Project Context1').first().json.project_overview }}\n</project context for reference, DON'T SUMMARIZE IT AS MEETING CONTENT>\n\n# Current memory:\n<project memory for reference, DON'T SUMMARIZE IT AS MEETING CONTENT>\n{{ $('Set Memory List1').item.json.output_list.toJsonString() }}\n</project memory for reference, DON'T SUMMARIZE IT AS MEETING CONTENT>\n\n# Here is the glossary of the project\n<project glossary>\n{{ $('Set Project Context1').first().json.glossary }}\n</project glossary>\n\n\n</PROJECT BACKGROUND CONTEXT, DON'T SUMMARIZE IT AS MEETING CONTENT>\n\n\n<ACTUAL MEETING MINUTES TO BE SUMMARIZED>\n\n# Meeting Description\n<new meeting description>\n{{ $('Set Project Context1').first().json.description }}\n</new meeting description>\n\n# Meeting Minutes Date\n{{ $('Set Project Context1').first().json.datetime }}\n\n# Summarize the below new meeting for updating the new memory\n<New meeting minutes pending to be summarized>\n{{ $('Set response1').item.json.textArray.join(\"\\\\n\") }}\n</New meeting minutes pending to be summarized>\n\n</ACTUAL MEETING MINUTES TO BE SUMMARIZED>"
      },
      "type": "@n8n/n8n-nodes-langchain.chainLlm",
      "typeVersion": 1.5,
      "position": [
        2128,
        1696
      ],
      "id": "3b02a56a-da32-4b92-be96-e605b9a7f25c",
      "name": "Updating LT Memory Chain1"
    },
    {
      "parameters": {
        "jsCode": "// Loop over input items and add a new field called 'myNewField' to the JSON of each one\n\nvar output_list = []\nfor (const item of $input.first().json.data.rows) {\n  var meeting_dt = item.datetime\n  var meeting_memory = item.memory\n  var output = {meeting_dt: meeting_dt, meeting_memory: meeting_memory}\n  output_list.push(output)\n}\n\nreturn {output_list};"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        2640,
        1440
      ],
      "id": "8eb5c750-6307-4d30-9cd0-08e2e918ca04",
      "name": "Set Memory List1"
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "586c23aa-3a7b-4d11-9c5e-c2e36efce3c7",
              "name": "appKey",
              "value": "={{ $json.appKey }}",
              "type": "string"
            },
            {
              "id": "76fafa1e-7d84-4337-a3ec-64da7d81a1dd",
              "name": "sign",
              "value": "={{ $json.sign }}",
              "type": "string"
            },
            {
              "id": "01ede934-21de-47f1-9c83-906766fbc1d4",
              "name": "rowIds",
              "value": "={{ $json.rowIds }}",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        256,
        1264
      ],
      "id": "412bc109-6618-4b60-9992-7d9aecc5d2cb",
      "name": "Set Workflow State1"
    },
    {
      "parameters": {
        "method": "POST",
        "url": "http://10.0.62.130:8880/api/v2/open/worksheet/getFilterRows",
        "sendBody": true,
        "specifyBody": "json",
        "jsonBody": "={\n    \"appKey\": \"{{ $('Set Workflow State1').first().json.appKey}}\",\n  \"sign\": \"{{ $('Set Workflow State1').first().json.sign }}\",\n  \"worksheetId\": \"project_overview\",\n  \"pageSize\": 50,\n  \"pageIndex\": 1,\n  \"listType\": 1,\n  \"filters\":[\n      {\n        \"controlId\":\"project\",\n        \"spliceType\": 1,\n        \"filterType\":2,\n        \"value\": \"{{ $json.project }}\"\n      }\n    ]\n}",
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        1216,
        1440
      ],
      "id": "fc62f991-60bb-4001-8c04-f8d1c589b6a2",
      "name": "[T-flow] Get Project Context1"
    },
    {
      "parameters": {
        "method": "POST",
        "url": "http://10.0.62.130:8880/api/v2/open/worksheet/editRow",
        "sendBody": true,
        "specifyBody": "json",
        "jsonBody": "={\n  \"appKey\": \"{{$('Set Workflow State1').first().json.appKey}}\",\n  \"sign\": \"{{$('Set Workflow State1').first().json.sign}}\",\n  \"worksheetId\": \"meeting_minutes\",\n  \"triggerWorkflow\": true,\n  \"controls\": [\n    {\n      \"controlId\": \"process_status\",\n      \"value\": \"Completed\"\n    },\n    {\n      \"controlId\": \"ai_summary\",\n      \"value\": \"{{ $json.textArray.join(\"\\\\n\") }}\"\n    }\n  ],\n  \"rowId\": \"{{ $('Set Project Context1').item.json.rowid}}\"\n}",
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        2240,
        1440
      ],
      "id": "8b889ffb-dcec-4c6b-875b-c47d95d5ba2b",
      "name": "[T-flow] Update AI Summary1"
    },
    {
      "parameters": {
        "method": "POST",
        "url": "http://10.0.62.130:8880/api/v2/open/worksheet/getFilterRows",
        "sendBody": true,
        "specifyBody": "json",
        "jsonBody": "={\n  \"appKey\": \"{{$('Set Workflow State1').first().json.appKey}}\",\n  \"sign\": \"{{$('Set Workflow State1').first().json.sign}}\",\n  \"worksheetId\": \"project_memory\",\n  \"pageSize\": 50,\n  \"pageIndex\": 1,\n  \"listType\": 0,\n  \"controls\": [],\n  \"filters\": [\n      {\n        \"controlId\":\"project\",\n        \"value\": \"{{$('Loop Over Items5').item.json.project}}\"\n    }\n  ]\n}",
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        2432,
        1440
      ],
      "id": "ab44a679-d8ec-4255-8c5f-7d122e57b2b1",
      "name": "[T-flow] Get Project Memory1"
    },
    {
      "parameters": {
        "method": "POST",
        "url": "http://10.0.62.130:8880/api/v2/open/worksheet/addRow",
        "sendBody": true,
        "specifyBody": "json",
        "jsonBody": "={\n  \"appKey\": \"{{$('Set Workflow State1').first().json.appKey}}\",\n  \"sign\": \"{{$('Set Workflow State1').first().json.sign}}\",\n  \"worksheetId\": \"project_memory\",\n  \"triggerWorkflow\": true,\n  \"controls\": [\n    {\n      \"controlId\": \"datetime\",\n      \"value\": \"{{ $('Loop Over Items5').item.json.datetime }}\"\n    },\n    {\n      \"controlId\": \"project_overview\",\n      \"value\": \"{{ $('Set Project Context1').item.json.project_rowid }}\"\n    },\n    {\n      \"controlId\": \"meeting_minutes\",\n      \"value\": \"{{ $('Loop Over Items5').item.json.rowid }}\"\n    },\n    {\n      \"controlId\": \"memory\",\n      \"value\": \"{{ $json.text.replaceAll(/\\r?\\n/g, \"\\\\n\").replaceAll(\"\\\\n{\\\\n\", \"\").replaceAll(\"\\\\n}\\\\n\", \"\").replaceAll(/```/g, \"\") }}\"\n    }\n  ]\n}",
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        2640,
        1696
      ],
      "id": "b1c9d6ef-1882-48cb-9bda-7540098b95ad",
      "name": "[T-flow] Update Memory List1"
    },
    {
      "parameters": {
        "content": "## Step 3: Contextual Summarize By AI\n1. Look up transcription \n2. Look up previous long term memory",
        "height": 880,
        "width": 2860,
        "color": 5
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        16,
        1104
      ],
      "typeVersion": 1,
      "id": "d0ce6830-6c83-4806-bcba-a113ec874bcb",
      "name": "Sticky Note6"
    },
    {
      "parameters": {
        "options": {}
      },
      "type": "n8n-nodes-base.splitInBatches",
      "typeVersion": 3,
      "position": [
        928,
        1360
      ],
      "id": "3c031616-6edf-4658-8584-f4431e1d2750",
      "name": "Loop Over Items5"
    },
    {
      "parameters": {
        "method": "POST",
        "url": "http://10.0.62.130:8880/api/v2/open/worksheet/getFilterRows",
        "sendBody": true,
        "specifyBody": "json",
        "jsonBody": "={\n  \"appKey\": \"{{ $('Set Workflow State1').item.json.appKey }}\",\n  \"sign\": \"{{ $('Set Workflow State1').item.json.sign }}\",\n  \"worksheetId\": \"meeting_minutes\",\n  \"pageSize\": 50,\n  \"pageIndex\": 1,\n  \"listType\": 1,\n  \"filters\":[\n      {\n        \"controlId\":\"rowid\",\n        \"spliceType\": 1,\n        \"filterType\":2,\n        \"values\": [{{ $('Set Workflow State1').item.json.rowIds}}]\n      },\n      {\n        \"controlId\":\"process_status\",\n        \"spliceType\": 1,\n        \"filterType\":2,\n        \"value\": \"Pending To AI\"\n      }\n    ]\n}",
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        496,
        1360
      ],
      "id": "c7e08206-bf76-45aa-be23-af738203bbaf",
      "name": "[T-flow] Get Meeting Minutes List2",
      "notesInFlow": true,
      "notes": "By Project and Status \"Pending To AI\""
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "8d2ee90f-c36b-407e-bec7-56e0e3af6778",
              "name": "appKey",
              "value": "={{ $('Webhook').item.json.body.appKey}}",
              "type": "string"
            },
            {
              "id": "9e86b4b5-0092-4164-b983-b9f1729d5877",
              "name": "sign",
              "value": "={{ $('Webhook').item.json.body.sign}}",
              "type": "string"
            },
            {
              "id": "9e06a8c1-4cd6-464e-a556-39286a61309a",
              "name": "rowIds",
              "value": "={{ $('[T-flow] Get Meeting Minutes List').item.json.data.rows.map(row => `\"${row.rowid}\"`).join(', ')}}",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        1760,
        784
      ],
      "id": "49780d29-f6d9-4944-ad1f-ee19dab982d8",
      "name": "Set T-flow App and Sign Fano"
    },
    {
      "parameters": {
        "method": "POST",
        "url": "http://10.0.62.130:8880/api/v2/open/worksheet/editRow",
        "sendBody": true,
        "specifyBody": "json",
        "jsonBody": "={\n  \"appKey\": \"{{ $('Webhook').item.json.body.appKey}}\",\n  \"sign\": \"{{ $('Webhook').item.json.body.sign}}\",\n  \"worksheetId\": \"meeting_minutes\",\n  \"rowId\":\"{{ $('Loop Over Items3').item.json.rowid}}\",\n  \"triggerWorkflow\": false,\n  \"controls\":[\n        {\n            \"controlId\":\"process_status\",\n            \"value\":\"Failed\"\n        },\n        {\n            \"controlId\":\"transcript\",\n            \"value\": \"Failed: Reset and try again\"\n        }\n    ]\n}",
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        2736,
        176
      ],
      "id": "09d794ce-4f08-4290-88b5-d3b2ed3b4f4e",
      "name": "[T-flow] Update T-flow Data Failed2",
      "notesInFlow": true,
      "notes": "Update the transcript and the status of the row data"
    },
    {
      "parameters": {
        "chunkingMode": "advanced",
        "options": {
          "summarizationMethodAndPrompts": {
            "values": {
              "summarizationMethod": "refine",
              "refinePrompt": "=# Meeting Date\n{{ $('Set Project Context1').first().json.datetime }}\n\n# Meeting Description\n<project description>\n{{ $('Set Project Context1').first().json.description }}\n</project description>\n\n# Here is the glossary of the project\n<project glossary>\n{{ $('Set Project Context1').first().json.glossary }}\n</project glossary>\n\n#Task:\nSummarize the provided meeting minutes transcript below into clear, concise bullet points.\n\n#Rules:\n1. Summarize the transcript in Cantonese.\n2. Present the summary entirely in bullet point format.\n3. Focus on capturing key discussion points, decisions made, and action items (including responsible persons and deadlines if mentioned).\n\n4. Use concise and objective language, following best practices for effective meeting minutes.\n\n5. Structure your summary in a way that mirrors the meeting agenda where possible\n\n6. Make sure for each item, you added the timeline as citation to the transcript\n<example>\n**討論要點：**\n- XXXX (00:12:00 - 00:15:00)\n</example>\n\n\nYour job is to produce a final summary using below sample format\n<sample>\n- **會議日期：** 2025年3月18日 08:46 AM\n- **會議主題：** XXXX\n\n**討論要點：**\n- XXXX\n\n**決策：**\n- XXXX\n\n**行動項目：**\n- XXXXX\n\n**其他重點：**\n- XXXX\n</sample>\n\nWe have provided an existing summary up to a certain point: \"{existing_answer}\"\nWe have the opportunity to refine the existing summary\n(only if needed) with some more context below.\n------------\n\"{text}\"\n------------\n\nGiven the new context, refine the original summary\nIf the context isn't useful, return the original summary.\n\nREFINED SUMMARY:",
              "refineQuestionPrompt": "=# Meeting Date\n{{ $('Set Project Context1').first().json.datetime }}\n\n# Meeting Description\n<project description>\n{{ $('Set Project Context1').first().json.description }}\n</project description>\n\n# Here is the glossary of the project\n<project glossary>\n{{ $('Set Project Context1').first().json.glossary }}\n</project glossary>\n\n#Task:\nSummarize the provided meeting minutes transcript below into clear, concise bullet points.\n\n#Rules:\n1. Summarize the transcript in Cantonese.\n2. Present the summary entirely in bullet point format.\n3. Focus on capturing key discussion points, decisions made, and action items (including responsible persons and deadlines if mentioned).\n<example>\n- **會議日期：** 2025年3月18日 08:46 AM\n- **會議主題：** XXXX\n\n**討論要點：**\n- XXXX\n\n**決策：**\n- XXXX\n\n**行動項目：**\n- XXXXX\n\n**其他重點：**\n- XXXX\n</example>\n\n4. Use concise and objective language, following best practices for effective meeting minutes.\n\n5. Structure your summary in a way that mirrors the meeting agenda where possible\n\n6. Make sure for each item, you added the timeline as citation to the transcript\n<example>\n**討論要點：**\n- XXXX (00:12:00 - 00:15:00)\n</example>\n\n\nWrite a concise summary of the following:\n<summarize>\n\n{{ $('Set Project Context1').first().json.transcript }}\n\n</summarize>\nCONCISE SUMMARY:"
            }
          }
        }
      },
      "type": "@n8n/n8n-nodes-langchain.chainSummarization",
      "typeVersion": 2.1,
      "position": [
        1632,
        1440
      ],
      "id": "cf024135-07f8-4995-82d4-f2816f1f7012",
      "name": "Summarization Chain"
    },
    {
      "parameters": {
        "chunkSize": 10000,
        "chunkOverlap": 1000,
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.textSplitterRecursiveCharacterTextSplitter",
      "typeVersion": 1,
      "position": [
        1888,
        1600
      ],
      "id": "f2c04a74-30d2-42b3-8b1b-cbe8ae0b310a",
      "name": "Recursive Character Text Splitter"
    },
    {
      "parameters": {},
      "type": "n8n-nodes-base.manualTrigger",
      "typeVersion": 1,
      "position": [
        -272,
        1248
      ],
      "id": "82a0018a-396f-48f0-beb9-458d9ca5cc3d",
      "name": "When clicking ‘Execute workflow’"
    },
    {
      "parameters": {
        "model": "deepseek/deepseek-r1-distill-llama-70b",
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenRouter",
      "typeVersion": 1,
      "position": [
        1472,
        1744
      ],
      "id": "cd7d44b4-e2c6-456e-8718-f0aa15893ae6",
      "name": "OpenRouter Chat Model",
      "credentials": {
        "openRouterApi": {
          "id": "hITFV12Y91OoL0mM",
          "name": "OpenRouter account"
        }
      }
    },
    {
      "parameters": {
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmOllama",
      "typeVersion": 1,
      "position": [
        1600,
        1760
      ],
      "id": "7261a142-464e-4413-a503-98d35925d0f4",
      "name": "Ollama Model",
      "credentials": {
        "ollamaApi": {
          "id": "xHuYe0MDGOs9IpBW",
          "name": "Local Ollama service"
        }
      }
    },
    {
      "parameters": {
        "model": {
          "__rl": true,
          "value": "=DeepSeek-R1-Distill-Llama-70B-FP8-dynamic",
          "mode": "id"
        },
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenAi",
      "typeVersion": 1.2,
      "position": [
        1824,
        1760
      ],
      "id": "1964698b-0464-4c2e-8417-e8066a50f94c",
      "name": "OpenAI Chat Model",
      "credentials": {
        "openAiApi": {
          "id": "bAsAeLFOqmIusxIw",
          "name": "OpenAi account"
        }
      }
    }
  ],
  "pinData": {
    "Webhook": [
      {
        "json": {
          "headers": {
            "host": "steveykyu.app.n8n.cloud",
            "user-agent": "Apache-HttpClient/4.5.13 (Java/17.0.13)",
            "content-length": "545",
            "accept": "application/json;charset=UTF-8",
            "accept-encoding": "gzip, br",
            "cdn-loop": "cloudflare; loops=1; subreqs=1",
            "cf-connecting-ip": "47.242.172.253",
            "cf-ew-via": "15",
            "cf-ipcountry": "HK",
            "cf-ray": "94be1cfb0786110d-HKG",
            "cf-visitor": "{\"scheme\":\"https\"}",
            "cf-worker": "n8n.cloud",
            "content-type": "multipart/form-data; boundary=Xl39G4711lDv0vvkv5p0ldyLqrnUvK1Q89CQn",
            "n8n_test": "n8n_test",
            "x-forwarded-for": "47.242.172.253, 172.71.211.7",
            "x-forwarded-host": "steveykyu.app.n8n.cloud",
            "x-forwarded-port": "443",
            "x-forwarded-proto": "https",
            "x-forwarded-server": "traefik-prod-users-gwc-18-7959cfc789-ft96v",
            "x-is-trusted": "yes",
            "x-real-ip": "47.242.172.253"
          },
          "params": {},
          "query": {},
          "body": {
            "appKey": "8ddaad176169573a",
            "sign": "MGQzYzUxZTQyNjFmYmFhZGE5M2RlNDYxNDBlNWZhMzE3MTZkOTQzOGIxNTQwYWUxMTNlMjg4NTU0YjJhZGYyZQ==",
            "app_owner": "catomind-uat",
            "confidence_threshold": "0.9"
          },
          "webhookUrl": "https://steveykyu.app.n8n.cloud/webhook/358e98c1-5b86-4d8c-88e9-f46f6b7996d5",
          "executionMode": "production"
        }
      }
    ]
  },
  "connections": {
    "Return Url List": {
      "main": [
        [
          {
            "node": "Loop Over Items2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Loop Over Items2": {
      "main": [
        [
          {
            "node": "[T-flow] Get Meeting Minutes List with fanolab id",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "[Backend] Submit Fanolab API",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Return Url List1": {
      "main": [
        [
          {
            "node": "Loop Over Items3",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Loop Over Items3": {
      "main": [
        [
          {
            "node": "Set T-flow App and Sign Fano",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Cache Fanolab Data",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Wait 10mins": {
      "main": [
        [
          {
            "node": "[Backend] Get Fanolab Transcription",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Set Speaker Map Data2": {
      "main": [
        [
          {
            "node": "[T-flow] Update Speaker Map Fano",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Map RowId and Transcriptions1": {
      "main": [
        [
          {
            "node": "[T-flow] Update T-flow Fano Data",
            "type": "main",
            "index": 0
          },
          {
            "node": "Set Speaker Map Data2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Merge2": {
      "main": [
        [
          {
            "node": "Loop Over Items3",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Webhook": {
      "main": [
        [
          {
            "node": "[T-flow] Get Meeting Minutes List",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "[T-flow] Get Meeting Minutes List": {
      "main": [
        [
          {
            "node": "Return Url List",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "[Backend] Submit Fanolab API": {
      "main": [
        [
          {
            "node": "[T-flow] Update T-flow Fanolab ID",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "[T-flow] Update T-flow Fanolab ID": {
      "main": [
        [
          {
            "node": "Loop Over Items2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "[T-flow] Get Meeting Minutes List with fanolab id": {
      "main": [
        [
          {
            "node": "Return Url List1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "[Backend] Get Fanolab Transcription": {
      "main": [
        [
          {
            "node": "Switch1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "[T-flow] Update T-flow Fano Data": {
      "main": [
        [
          {
            "node": "Merge2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "[T-flow] Update Speaker Map Fano": {
      "main": [
        [
          {
            "node": "Merge2",
            "type": "main",
            "index": 1
          }
        ]
      ]
    },
    "Switch1": {
      "main": [
        [
          {
            "node": "Map RowId and Transcriptions1",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "[T-flow] Update T-flow Data Failed1",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Wait 10mins",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "[T-flow] Update T-flow Data Failed2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Cache Fanolab Data": {
      "main": [
        [
          {
            "node": "[Backend] Get Fanolab Transcription",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Map the Transcript1": {
      "main": [
        [
          {
            "node": "Loop Over Items5",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Set response1": {
      "main": [
        [
          {
            "node": "[T-flow] Update AI Summary1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Set Project Context1": {
      "main": [
        [
          {
            "node": "Summarization Chain",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Updating LT Memory Chain1": {
      "main": [
        [
          {
            "node": "[T-flow] Update Memory List1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Set Memory List1": {
      "main": [
        [
          {
            "node": "Updating LT Memory Chain1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Set Workflow State1": {
      "main": [
        [
          {
            "node": "[T-flow] Get Meeting Minutes List2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "[T-flow] Get Project Context1": {
      "main": [
        [
          {
            "node": "Set Project Context1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "[T-flow] Update AI Summary1": {
      "main": [
        [
          {
            "node": "[T-flow] Get Project Memory1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "[T-flow] Get Project Memory1": {
      "main": [
        [
          {
            "node": "Set Memory List1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "[T-flow] Update Memory List1": {
      "main": [
        [
          {
            "node": "Loop Over Items5",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Loop Over Items5": {
      "main": [
        [],
        [
          {
            "node": "[T-flow] Get Project Context1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "[T-flow] Get Meeting Minutes List2": {
      "main": [
        [
          {
            "node": "Map the Transcript1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Set T-flow App and Sign Fano": {
      "main": [
        [
          {
            "node": "Set Workflow State1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Summarization Chain": {
      "main": [
        [
          {
            "node": "Set response1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Recursive Character Text Splitter": {
      "ai_textSplitter": [
        [
          {
            "node": "Summarization Chain",
            "type": "ai_textSplitter",
            "index": 0
          }
        ]
      ]
    },
    "OpenAI Chat Model": {
      "ai_languageModel": [
        [
          {
            "node": "Summarization Chain",
            "type": "ai_languageModel",
            "index": 0
          },
          {
            "node": "Updating LT Memory Chain1",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    }
  },
  "active": true,
  "settings": {
    "executionOrder": "v1"
  },
  "versionId": "4ed285c8-0c11-4135-a13b-8b5a9db27b59",
  "meta": {
    "templateCredsSetupCompleted": true,
    "instanceId": "558d88703fb65b2d0e44613bc35916258b0f0bf983c5d4730c00c424b77ca36a"
  },
  "id": "jI3BQuJX4hajcXth",
  "tags": []
}